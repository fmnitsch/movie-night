(this["webpackJsonpmovie-night"]=this["webpackJsonpmovie-night"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),c=n(21),i=n.n(c),o=(n(29),n(12)),u=n(13),l=n(15),m=n(14),h=n(9),d=n(3),b=(n(30),n(2)),p=n.n(b),f=n(5),v=(n(32),"https://www.omdbapi.com/?apikey="),j="1f00160f",x={getMovies:function(e){return Object(f.a)(p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(v).concat(j,"&s=").concat(e,"&type=movie"));case 3:if(!(n=t.sent).ok){t.next=13;break}return t.next=7,n.json();case 7:if(!(r=t.sent).Error){t.next=12;break}return t.abrupt("return",!1);case 12:return t.abrupt("return",r.Search);case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",alert(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},getFilmById:function(e){return Object(f.a)(p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(v).concat(j,"&i=").concat(e));case 3:if(!(n=t.sent).ok){t.next=13;break}return t.next=7,n.json();case 7:if(!(r=t.sent).Error){t.next=12;break}return t.abrupt("return",!1);case 12:return t.abrupt("return",r);case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",alert(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()}},O="https://movies-db-api-fmn.herokuapp.com/api/movies",g={getMovieIdList:function(){return Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O);case 3:if(!(t=e.sent).ok){e.next=10;break}return e.next=7,t.json();case 7:if(!(n=e.sent)){e.next=10;break}return e.abrupt("return",n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},submitNominations:function(e){return Object(f.a)(p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie:e})},t.prev=1,t.next=4,fetch(O,n);case 4:if(!(r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:t.sent;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()}};n(33);var y=function(e){return Object(r.jsxs)("div",{className:"search-bar",children:[Object(r.jsx)("p",{className:"input-instructions",children:"Start typing a movie title"}),Object(r.jsx)("input",{className:"input",type:"search",placeholder:"Search",results:"0",onChange:function(t){e.updateSearchTerm(t),e.search(t.target.value)}})]})};n(34);var k=function(e){var t=function(t){var n=document.getElementById(t.target.id);e.nominations.some((function(e){return e.imdbID===t.target.id}))||(!function(e){var t=document.querySelector(".".concat(e));t.classList.add("onClick"),setTimeout((function(){t.classList.remove("onClick")}),500)}(t.target.id),e.nominateMovie(t.target.id),n.style.opacity="50%")};return Object(a.useEffect)((function(){var t=document.querySelectorAll(".nominate"),n=document.querySelector(".results-header");t.forEach((function(t){return function(t){e.nominations.some((function(e){return e.imdbID===t.id}))?t.style.opacity="50%":t.style.opacity="100%"}(t)})),e.searchResults.length>0?n.style.visibility="visible":n.style.visibility="hidden",5===e.nominations.length&&t.forEach((function(e){return e.style.opacity="50%"}))})),Object(r.jsxs)("div",{className:"results-container",children:[Object(r.jsxs)("h3",{className:"results-header",children:['Results for "',e.searchTerm,'"']}),Object(r.jsx)("div",{className:"movie-list-container",children:e.searchResults.map((function(e){return Object(r.jsxs)("div",{className:"movie-card ".concat(e.imdbID),children:[Object(r.jsxs)("div",{className:"movie",children:[Object(r.jsx)("img",{className:"movie-poster",src:e.Poster,alt:""}),Object(r.jsx)("div",{className:"movie-title-container",children:Object(r.jsxs)("p",{className:"movie-title",children:[e.Title," ",Object(r.jsxs)("span",{className:"year",children:["(",e.Year,")"]})]})})]}),Object(r.jsx)("button",{className:"nominate",id:e.imdbID,onClick:t,children:"Pick"})]},e.imdbID)}))})]})};n(35);var N=function(e){var t=function(t){!function(e){var t=document.getElementById("nominated ".concat(e));t.classList.add("onClick"),setTimeout((function(){t.classList.remove("onClick")}),300)}(t.target.id),setTimeout((function(){e.unNominateMovie(t.target.id)}),90)};return Object(a.useEffect)((function(){var t=document.querySelector(".nominations-instructions"),n=document.querySelector(".completion-banner");e.nominations.length>0?t.style.display="none":t.style.display="block",5===e.nominations.length?n.style.display="block":n.style.display="none"})),Object(r.jsxs)("div",{className:"nominations-container",children:[Object(r.jsxs)("h2",{className:"nominations-header",children:["Your Picks (",e.nominations.length,"/5)"]}),Object(r.jsxs)("div",{className:"movie-list-container",children:[Object(r.jsx)("p",{className:"nominations-instructions",children:"Your picks will appear here as you select them from the search results."}),e.nominations.map((function(e){return Object(r.jsxs)("div",{className:"movie-card nominated ".concat(e.imdbID),id:"nominated ".concat(e.imdbID),children:[Object(r.jsxs)("div",{className:"movie",children:[Object(r.jsx)("img",{className:"movie-poster",src:e.Poster,alt:""}),Object(r.jsx)("div",{className:"movie-title-container",children:Object(r.jsxs)("p",{className:"movie-title",children:[e.Title," ",Object(r.jsxs)("span",{className:"year",children:["(",e.Year,")"]})]})})]}),Object(r.jsx)("button",{className:"un-nominate",id:e.imdbID,onClick:t,children:"Remove"})]},e.imdbID)}))]}),Object(r.jsxs)("div",{className:"completion-banner",children:[Object(r.jsx)("p",{children:"Thanks for picking your 5 movies! Help others choose what to watch by submitting your picks below"}),Object(r.jsx)("div",{className:"button-wrapper",children:Object(r.jsx)(h.b,{to:"/movie-night/top-ranked",children:Object(r.jsx)("button",{className:"submit-nominations",onClick:e.submit,children:"Submit Picks"})})})]})]})},w=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={searchTerm:"",searchResults:[],nominations:[]},e.updateSearchTerm=function(t){e.setState({searchTerm:t.target.value})},e.search=function(){var t=Object(f.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getMovies(n);case 2:if(r=t.sent,0!==n.length){t.next=7;break}e.setState({searchResults:[]}),t.next=12;break;case 7:if(!1!==r){t.next=11;break}return t.abrupt("return");case 11:e.setState({searchResults:r});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.nominateMovie=function(){var t=Object(f.a)(p.a.mark((function t(n){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getFilmById(n);case 2:if(r=t.sent,a=e.state.nominations,!(e.state.nominations.length>=5)){t.next=8;break}return t.abrupt("return");case 8:a.push(r),e.setState({nominations:a});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.unNominateMovie=function(){var t=Object(f.a)(p.a.mark((function t(n){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getFilmById(n);case 2:r=t.sent,a=e.state.nominations.filter((function(e){return e.imdbID!==r.imdbID})),e.setState({nominations:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submit=function(){e.state.nominations.forEach((function(e){var t={id:e.imdbID};g.submitNominations(t)}))},e}return Object(u.a)(n,[{key:"saveStateToLocalStorage",value:function(){for(var e in this.state)localStorage.setItem(e,JSON.stringify(this.state[e]))}},{key:"componentDidMount",value:function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);e.push(JSON.parse(localStorage.getItem(n)))}this.setState({nominations:e[1]}),window.addEventListener("beforeunload",this.saveStateToLocalStorage.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage.bind(this)),this.saveStateToLocalStorage()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("div",{className:"welcome-section",children:[Object(r.jsx)("h1",{children:"Movie Night!"}),Object(r.jsx)("p",{children:"Pick out the top 5 movies on your must-watch list and never lose track of them!"}),Object(r.jsxs)("p",{children:["Need some ideas?\xa0\xa0",Object(r.jsx)(h.b,{to:"/movie-night/top-ranked",children:"See what others are watching"})]}),Object(r.jsx)(y,{search:this.search,searchTerm:this.state.searchTerm,updateSearchTerm:this.updateSearchTerm}),Object(r.jsx)(k,{searchTerm:this.state.searchTerm,searchResults:this.state.searchResults,nominateMovie:this.nominateMovie,nominations:this.state.nominations})]}),Object(r.jsx)(N,{nominations:this.state.nominations,unNominateMovie:this.unNominateMovie,submit:this.submit})]})}}]),n}(s.a.Component),S=n(23),T=(n(41),n.p+"static/media/Refresh.5b87ce0e.svg");var I=function(e){var t=Object(a.useState)([]),n=Object(S.a)(t,2),s=n[0],c=n[1],i=function(e){var t={};for(var n in e instanceof Array&&e.forEach((function(e,n){t[e]?t[e].push(n):t[e]=[n]})),t)if(t.hasOwnProperty(n)){var r=t[n].length;t[n]=r}return Object.entries(t).sort((function(e,t){return t[1]-e[1]}))},o=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getMovieIdList();case 2:return t=e.sent,n=[],t.movies.forEach((function(e){for(var t in e)n.push(e[t])})),r=i(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:t=e.sent,n=[],r=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getFilmById(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=0;case 6:if(!(a<5)){e.next=14;break}return e.next=9,r(t[a][0]);case 9:s=e.sent,n.push(s);case 11:a++,e.next=6;break;case 14:c(n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u();var e=document.querySelector(".loading-container");return document.querySelector(".movie-container-large")?e.style.display="none":e.style.display="flex",function(){}})),Object(r.jsxs)("div",{className:"top-ranked",children:[Object(r.jsx)("h1",{children:"Here's what people are watching"}),Object(r.jsx)("h2",{children:"These are the top 5 movies according to our users. Wanna watch one?"}),Object(r.jsx)(h.b,{to:"/movie-night",children:Object(r.jsx)("p",{children:"Back to search"})}),Object(r.jsxs)("div",{className:"top-5-container",children:[Object(r.jsxs)("div",{className:"loading-container",children:[Object(r.jsx)("p",{className:"loading-text",children:"Loading..."}),Object(r.jsx)("img",{className:"loading-spinner",src:T,alt:""})]}),s.map((function(e){return Object(r.jsxs)("div",{className:"movie-container-large",children:[Object(r.jsx)("img",{className:"movie-poster-large",src:e.Poster,alt:"poster for ".concat(e.Title," (").concat(e.Year,")")}),Object(r.jsx)("h3",{children:e.Title})]},e.imdbID)}))]})]})},D=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(h.a,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{path:"/movie-night",exact:!0,component:w}),Object(r.jsx)(d.a,{path:"/movie-night/top-ranked",component:I})]})})}}]),n}(s.a.Component),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root")),E()}},[[42,1,2]]]);
//# sourceMappingURL=main.f4aba8af.chunk.js.map